$(function(){$(".scrolltop").parent().scroll(function(){$(".scrolltop").parent()[0].scrollTop>300?$(".scrolltop").addClass("totop"):$(".scrolltop").removeClass("totop")}),$(".scrolltop").click(function(){$(this).parent()[0].scrollTop=0}),$(".more").click(function(){$(".morelist").toggleClass("item-hidden")})});var cloneDom=function(t){var e={baseDom:null,url:null,data:[],cloneSize:0,page:!1,pageContainer:null},a=this;a.newObj=$.extend(e,t);var n=function(t){return!(!a.newObj.data&&!a.newObj.url)&&(!(!a.newObj.baseDom||a.newObj.cloneSize<1)&&(a.newObj.data[0]?a.newObj.data=!a.newObj.data instanceof Array?[a.newObj.data]:a.newObj.data:a.newObj.url&&$.get(a.newObj.url+"?_="+Math.random(),function(e){a.newObj.data="string"==typeof e?JSON.parse(e):e,t&&"function"==typeof t&&t()}),!0))},o=function(t){t=t||1;var e=a.newObj.cloneSize,n=(t-1)*e,o=t*e-1;if(!a.newObj.data[0])return!1;$(a.newObj.baseDom).not(":first-child").remove();for(var r=n;r<=o;r++)if(a.newObj.data[r]){var i=$(a.newObj.baseDom).eq(0).clone().appendTo($(a.newObj.baseDom).parent());i.data("model",a.newObj.data[r]).data("guid",a.newObj.data[r].guid||Guid.NewGuid().ToString()),$.each($("[dombind]",i),function(t,e){if($(e).attr("dombind").indexOf("*")>-1){var n=1;return $.each($(e).attr("dombind").split("*"),function(t,e){n*=a.newObj.data[r][$.trim(e)]}),$(e).text(n),!0}$(e).is("img")?$(e).attr("src",a.newObj.data[r][$(e).attr("dombind")]):"id"==$(e).attr("dombind")?$(e).attr("href",$(e).attr("href")+"?id="+a.newObj.data[r][$(e).attr("dombind")]):"title"==$(e).attr("dombind")?($(e).attr("title",a.newObj.data[r][$(e).attr("dombind")]),$(e).text(a.newObj.data[r][$(e).attr("dombind")])):"price"==$(e).attr("dombind")?$(e).text("ï¿¥"+a.newObj.data[r][$(e).attr("dombind")]):$(e).text(a.newObj.data[r][$(e).attr("dombind")])})}$(a.newObj.baseDom).eq(0).remove()},r=function(){$(a.newObj.pageContainer).pagination({dataSource:a.newObj.data,pageSize:a.newObj.cloneSize,callback:function(t,e){a.refresh(e.pageNumber)}})};this.refresh=function(t){if(!this.newObj.data[0]&&this.newObj.url)n(function(){o(t),a.newObj.page&&r()});else if(this.newObj.data&&!this.newObj.data instanceof Array){var e=n();e&&(o(t),a.newObj.page&&r())}else this.newObj.data&&this.newObj.data instanceof Array&&o(t)},this.refresh(1)};